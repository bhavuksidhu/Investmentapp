{% extends "logged_in_base.html" %}
{% block title %}Settings{% endblock %}
{% block content %}
    <div class="WrapperArea">
        <div class="WrapperBox">
            <div class="TitleBox">
                <h4>Settings:</h4>
            </div>
            <div class="StaticBoxArea">
                <div id="accordion">
                    <div class="card">
                        <div class="card-header">
                            <a class="card-link"
                               data-toggle="collapse"
                               href="#collapseThree"
                               aria-expanded="true">
                                <h4>
                                    <span><i class="fa fa-unlock-alt" aria-hidden="true"></i></span> Password
                                </h4>
                            </a>
                        </div>
                        <div id="collapseThree"
                             class="collapse show"
                             data-parent="#accordion"
                             style="">
                            <div class="card-body">
                                <div class="CommonForm">
                                    <form url={% url "adminpanel:settings" %} method="POST">
                                        {% csrf_token %}
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label>Enter your old Password</label>
                                                </div>
                                                <div class="col-sm-9">
                                                    <input type="password"
                                                           name="old_password"
                                                           class="form-control"
                                                           placeholder="Enter your old Password" required>
                                                           <span class="encrypt-toggle"><i class="fa fa-eye" aria-hidden="true"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label>Create New Password</label>
                                                </div>
                                                <div class="col-sm-9">
                                                    <input type="password"
                                                           name="new_password"
                                                           class="form-control"
                                                           placeholder="Enter New Password" required>
                                                           <span class="encrypt-toggle"><i class="fa fa-eye" aria-hidden="true"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label>Confirm New Password</label>
                                                </div>
                                                <div class="col-sm-9">
                                                    <input type="password"
                                                           name="new_password_2"
                                                           class="form-control"
                                                           placeholder="Re-enter your password" required>
                                                           <span class="encrypt-toggle"><i class="fa fa-eye" aria-hidden="true"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="Save">
                                            <button type="submit" class="Button">Update Password</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% include "fragments/messages.html" %}
        </div>
    </div>

<script>
    $(".encrypt-toggle").on("click",function(e){
        let div = e.target.closest("div")
        let input = div.querySelector("input")
        if (input.type == "password"){
            input.type = "text"
        }
        else{
            input.type = "password"
        }
    })
</script>
{% endblock %}
